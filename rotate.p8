pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
sx = 70
sy = 50
poke(0x5f2d, 1)

per = 0
speed=10
wheel=0

function _update()
	sx = stat(32)
	sy = stat(33)
	
	wheel += stat(36)
	if (wheel<0) wheel=speed-1
	if (wheel>speed-1) wheel=0
	per = wheel/speed
end

function _draw()
	cls(1)
	
	if wheel == 0 then
 	per = t() / 1
 	--per=0.75
	end
	
	local cx = sx + 3
	local cy = sy + 3
	
	for x = 0,7 do
		for y = 0,7 do
			
			local px = sx+x
			local py = sy+y
			
			local dx = cx-sx-x+1
			local dy = cy-sy-y+1
			
			local h = sqrt(dx*dx+dy*dy)
			local a = atan2(dx,dy)
			
			a -= per
			if (a < 0) a += 1
			
		 dx = cos(a) * h
		 dy = sin(a) * h
		 
		 px = round(cx+dx)
		 py = round(cy+dy)
			
			local c = sget(x+8,y)
			
			for zx=0,1 do
				for zy=0,1 do
					pset(px+zx,py+zy, c)
				end
			end
		end
	end
end

function round(n)
	-- do return flr(n) end
	--do return n end
	if (n+0.5 > ceil(n)) n+=1
	return flr(n)
end
__gfx__
00000000199809910aaaaaa0cfffeeec000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaaa9a000000affffeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007008aa99aa0a0a00a0affffeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770008a9999a8a000000affffeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770008a9999a8a0a00a0adddd2222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007009aa99aa9a0aaaa0adddd2222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaaa9a000000adddd2222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000188908910aaaaaa0cddd222c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
