pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
bombs={}

-- note: make them waterbombs
-- that way no one gets hurt.

function _init()
	p1=makeplayer(8,8,16)
	p2=makeplayer(104,104,32)
	
	makebomb(40,40,4,2)
end

function _draw()
	cls()
	map()
	drawplayer(p1)
	drawplayer(p2)
	
	-- test
	
	foreach(bombs,drawbomb)
	
	if t() < 3.2 then
	
	local s = 4
	if t() % 1 < 0.5 then s=5 end
	local now=t()>3
	if now then s=6 end
	
	if now then
		spr(6,40,40)
		local z = min(4,flr((t()-3)*40))
		for x=1,z do
			spr(22,40+(x*8),40)
			spr(22,40-(x*8),40)
		end
		for y=1,z do
			spr(38,40,40+(y*8))
			spr(38,40,40-(y*8))
		end
	else
		for i=1,15 do pal(i,1) end
		spr(s,41,41)
		pal()
		spr(s,40,40)
	end
	
	end
	-- test
end

function _update()
	
end

function drawbomb(b)
	
end

function drawplayer(p)
	for i=1,15 do pal(i,1) end
	_drawplayer(p,p.x+1,p.y+1)
	pal()
	_drawplayer(p,p.x,p.y)
end

function _drawplayer(p,x,y)
	spr(p.s,x,y)
end

function makeplayer(x,y,s)
	return {
		x=x,
		y=y,
		mx=0,
		my=0,
		dx=0,
		dy=0,
		vx=0,
		vy=0,
		speed=2,
		power=2,
		s=s,
	}
end

function makebomb(x,y,pow,sec)
	add(bombs,{
		t='reg',
		x=x,
		y=y,
		range=pow,
		exploding=false,
		t=sec*30,
	})
end

__gfx__
000000003333333366666665fffffff4000a8000000a98007cc7c7cc000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333365555555ff44444200009000000ccc00c7cccc77000000000000000000000000000000000000000000000000000000000000000000000000
007007003333333365555555f4fff442000cc00000c7ccc07cccc7cc000000000000000000000000000000000000000000000000000000000000000000000000
000770003333333365555555f4f4424200c7cc000c7ccccccccc7cc7000000000000000000000000000000000000000000000000000000000000000000000000
000770003333333365555555f4f442420c7cccc00cccccccc77cc7cc000000000000000000000000000000000000000000000000000000000000000000000000
007007003333333365555555f44222420cccccc00ccccccc7ccc7c7c000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333365555555f444442200cccc0000ccccc0c777cc7c000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333335555555542222222000cc000000ccc00cc7cccc7000000000000000000000000000000000000000000000000000000000000000000000000
00888800008888000088880000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08f1f1800888888008f1f180008888000888888000888800cc777c77000000000000000000000000000000000000000000000000000000000000000000000000
0ffffff00f8888f00ffffff008f1f1800f8888f00888888077ccc77c000000000000000000000000000000000000000000000000000000000000000000000000
00f88f0000ffff0000f88f000ffffff000ffff000f8888f07777cccc000000000000000000000000000000000000000000000000000000000000000000000000
00cccc0000cccc000fcccc0000f88f000fcccc0000ffff00ccc7c7cc000000000000000000000000000000000000000000000000000000000000000000000000
00fccf0000fccf00000ccf00009999f0000ccf0000ccccf077ccc777000000000000000000000000000000000000000000000000000000000000000000000000
00044000000440000054400000f445000054400000f44500cc777cc7000000000000000000000000000000000000000000000000000000000000000000000000
00050500000505000000500000050000000050000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0044440000444400004444000000000000444400000000000cc77c70000000000000000000000000000000000000000000000000000000000000000000000000
04f1f1400444444004f1f140004444000444444000444400077c7cc0000000000000000000000000000000000000000000000000000000000000000000000000
0ffffff00f4444f00ffffff004f1f1400f4444f00444444007cc7c70000000000000000000000000000000000000000000000000000000000000000000000000
00f88f0000ffff0000f88f000ffffff000ffff000f4444f0077c7c70000000000000000000000000000000000000000000000000000000000000000000000000
00999900009999000f99990000f88f000f99990000ffff0007cc7c70000000000000000000000000000000000000000000000000000000000000000000000000
00f99f0000f99f0000099f0000ccccf000099f00009999f007c7cc70000000000000000000000000000000000000000000000000000000000000000000000000
00044000000440000054400000f445000054400000f445000c7c7c70000000000000000000000000000000000000000000000000000000000000000000000000
0005050000050500000050000005000000005000000500000c7c77c0000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010301010101010101010101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
